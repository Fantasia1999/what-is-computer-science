# 读《深入理解计算机系统》（二）


- [读《深入理解计算机系统》（一）](https://github.com/ShannonChenCHN/what-is-computer-science/blob/master/posts/%E8%AF%BB%E3%80%8A%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E3%80%8B_01.md)
- [读《深入理解计算机系统》（二）](https://github.com/ShannonChenCHN/what-is-computer-science/blob/master/posts/%E8%AF%BB%E3%80%8A%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E3%80%8B_02.md)
- [读《深入理解计算机系统》（三）](https://github.com/ShannonChenCHN/what-is-computer-science/blob/master/posts/%E8%AF%BB%E3%80%8A%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E3%80%8B_03.md)
- [读《深入理解计算机系统》（四）](https://github.com/ShannonChenCHN/what-is-computer-science/blob/master/posts/%E8%AF%BB%E3%80%8A%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E3%80%8B_04.md)


## 目录
- 第一部分 程序结构和执行
  - 第2章　信息的表示和处理
    - 2.1 信息存储
    - 2.2 整数表示
    - 2.3 整数运算
    - 2.4 浮点数
  - 第3章　程序的机器级表示
    - 3.1 历史观点
    - 3.2 程序编码
    - 3.3 数据格式
    - 3.4 访问信息
    - 3.5 算术和逻辑操作
    - 3.6 控制
    - 3.7 过程
    - 3.8 数组分配和访问
    - 3.9 异数的数据结构
    - 3.10 在机器级程序中将控制与数据结合起来
    - 3.11 浮点代码
  - 第4章　处理器体系结构
    - 4.1 Y86-64 指令集体系架构
    - 4.2 逻辑设计和硬件控制语言 HCL
    - 4.3 Y86-64 的顺序实现
    - 4.4 流水线的通用原理
    - 4.5 Y86-64 的流水线实现
  - 第5章　优化程序性能
    - 5.1 优化编译器的能力和局限性
    - 5.2 表示程序性能
    - 5.3 程序示例
    - 5.4 消除循环的低效率
    - 5.5 减少过程调用
    - 5.6 消除不必要的内存引用
    - 5.7 理解现代处理器
    - 5.8 循环展开
    - 5.9 提高并行性
    - 5.10 优化合并代码的结果小结
    - 5.11 一些限制因素
    - 5.12 理解内存性能
    - 5.13 应用：性能提高技术
    - 5.14 确认和消除性能瓶颈
  - 第6章　存储器层次结构
    - 6.1 存储技术
    - 6.2 局部性
    - 6.3 存储器层次结构
    - 6.4 高速缓存存储器
    - 6.5 编写高速缓存友好的代码
    - 6.6 综合：高速缓存对程序性能的影响


## 问题

## 第一部分 程序结构和执行
## 第 2 章 信息的表示和处理

### 2.1 信息存储

- 十六进制表示法
- 字数据大小
- 寻址和字节顺序
- 计算机中的字符串是如何表示的
- 计算机中的代码是如何表示的
- 布尔代数
- C 语言中的按位布尔运算
- C 语言中的逻辑运算
- C 语言中的移位运算

### 2.2 整数表示

- 整型数据类型
- 无符号数的编码
- 补码编码
- 有符号数和无符号数之间的转换
- C 语言中的有符号数与无符号数
- 扩展一个数字的位表示
- 截断数字
- 关于有符号数与无符号数的建议

### 2.3 整数运算

- 无符号加法
- 补码加法
- 补码的非
- 无符号乘法
- 补码乘法
- 乘以常数
- 除以 2 的幂
- 关于整数运算的最后思考

### 2.4 浮点数

- 二进制小数
- IEEE 浮点表示
- 舍入
- 浮点运算
- C 语言中的浮点数

## 第 3 章 程序的机器级表示

### 3.1 历史观点

### 3.2 程序编码

- 机器级代码
- 汇编代码格式

### 3.3 数据格式

### 3.4 访问信息

- 操作数指示符
- 数据传送指令
- 压入和弹出栈数据


### 3.5 算术和逻辑操作

- 加载有效地址
- 一元和二元操作
- 移位操作
- 特殊的算术操作


### 3.6 控制

- 条件码
- 访问条件码
- 跳转指令
- 跳转指令的编码
- 用条件控制来实现条件分支
- 用条件传送来实现条件分支
- 循环
- switch 语句


### 3.7 过程

- 运行时栈
- 转移控制
- 数据传送
- 栈上的局部存储
- 寄存器中的局部存储空间
- 递归过程


### 3.8 数组分配和访问

- 基本原则
- 指针运算
- 嵌套的数组
- 定长数组
- 变长数组


### 3.9 异质的数据结构

- 结构体
- 联合体
- 数据对齐


### 3.10 在机器级程序中将控制和数据结合起来

- 理解指针
- 应用：使用 GDB 调试器
- 内存越界引用和缓冲区溢出
- 对抗缓冲区溢出攻击
- 支持变长栈帧


### 3.11 浮点代码

- 浮点传送和转换操作
- 过程中的浮点代码
- 浮点运算操作
- 定义和使用浮点常数
- 在浮点代码中使用位级操作
- 浮点比较操作
- 对浮点代码的观察结论


## 第 4 章 处理器体系结构


### 4.1 Y86-64 指令集体系架构


- 程序员可见的状态
- Y86-64 指令
- 指令编码
- Y86-64 异常
- Y86-64 程序
- 一些 Y86-64 指令的详情

### 4.2 逻辑设计和硬件控制语言 HCL

- 逻辑门
- 组合电路和 HCL 布尔表达式
- 字级的组合电路和 HCL 整数表达式
- 集合关系
- 存储器和时钟


### 4.3 Y86-64 的顺序实现


- 将处理组织成阶段
- SEQ 硬件结构
- SEQ 的时序
- SEQ 阶段的实现

### 4.4 流水线的通用原理

- 计算流水线
- 流水线操作的详细说明
- 流水线的局限性
- 带反馈的流水线系统

### 4.5 Y86-64 的流水线实现


- SEQ+：重新安排计算阶段
- 插入流水线寄存器
- 对信号进行重新排列和标号
- 预测下一个 PC
- 流水线冒险
- 异常处理
- PIPE 各阶段的实现
- 流水线控制逻辑
- 性能分析
- 未完成的工作


## 第5章　优化程序性能


写程序的两个目标：首先是实现功能，能够正常工作；其次是跑的快。

编写高效程序的几个入手点：       
- 选择合适的算法和数据结构
- 编写出编译器能够优化的代码
- 并行计算


通常，程序员必须在实现和维护程序的简单性和它的运行速度之间做出权衡。

优化程序性能的具体步骤：        
- 消除不必要的工作
- 并行执行任务
- 使用 profiler 工具进行性能分析


### 5.1 优化编译器的能力和局限性


### 5.2 表示程序性能



### 5.3 程序示例

### 5.4 消除循环的低效率

### 5.5 减少过程调用

### 5.6 消除不必要的内存引用

### 5.7 理解现代处理器

- 整体操作
- 功能单元的性能
- 处理器操作的抽象模型

### 5.8 循环展开




### 5.9 提高并行性

- 多个累积变量
- 重新结合变换

### 5.10 优化合并代码的结果小结

### 5.11 一些限制因素

- 寄存器溢出
- 分支预测和预测错误处罚

### 5.12 理解内存性能

- 加载的性能
- 存储的性能

### 5.13 应用：性能提高技术


### 5.14 借助 Profiler 来确认和消除性能瓶颈



## 第6章　存储器层次结构


### 6.1 存储技术

- 随机访问存储器（RAM）
- 磁盘存储
- 固态硬盘
- 存储技术趋势

### 6.2 局部性

- 对程序数据引用的局部性
- 取指令的局部性


### 6.3 存储器层次结构

- 存储器层次结构中的缓存
- 存储器层次结构中的一些概念

### 6.4 高速缓存存储器

- 通用的高速缓存存储器组织结构
- 直接映射高速缓存
- 组相联高速缓存
- 全相联高速缓存
- 有关写的问题
- 剖析一个真实的高速缓存层次结构
- 高速缓存参数对性能的影响


### 6.5 编写高速缓存友好的代码





### 6.6 综合：高速缓存对程序性能的影响

- 存储器山
- 重新排列循环以提高空间局部性
- 在程序中利用局部性