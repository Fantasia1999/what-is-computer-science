# 读《深入理解计算机系统》（四）


- [读《深入理解计算机系统》（一）](https://github.com/ShannonChenCHN/what-is-computer-science/blob/master/posts/%E8%AF%BB%E3%80%8A%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E3%80%8B_01.md)
- [读《深入理解计算机系统》（二）](https://github.com/ShannonChenCHN/what-is-computer-science/blob/master/posts/%E8%AF%BB%E3%80%8A%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E3%80%8B_02.md)
- [读《深入理解计算机系统》（三）](https://github.com/ShannonChenCHN/what-is-computer-science/blob/master/posts/%E8%AF%BB%E3%80%8A%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E3%80%8B_03.md)
- [读《深入理解计算机系统》（四）](https://github.com/ShannonChenCHN/what-is-computer-science/blob/master/posts/%E8%AF%BB%E3%80%8A%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E3%80%8B_04.md)

## 目录

- 第三部分 程序间的交互和通信
  - 第 10 章 系统级 I/O
    - 10.1 Unix I/O
    - 10.2 文件
    - 10.3 打开和关闭文件
    - 10.4 读和写文件
    - 10.5 用 RIO 包健壮地读写
    - 10.6 读取文件元数据
    - 10.7 读取目录和内容
    - 10.8 共享文件
    - 10.9 I/O 重定向
    - 10.10 标准 I/O 
    - 10.11 综合：我该使用哪些 I/O 函数
  - 第 11 章 网络编程
    - 11.1 客户端-服务器编程模型
    - 11.2 网络
    - 11.3 全球 IP 因特网
    - 11.4 套接字接口
    - 11.5 Web 服务器
    - 11.6 综合：TINY Web 服务器
  - 第 12 章 并发编程
    - 12.1 基于进程的并发编程
    - 12.2 基于 I/O 多路复用的并发编程
    - 12.3 基于线程的并发编程
    - 12.4 多线程程序中的共享变量
    - 12.5 用信号量同步线程
    - 12.6 使用线程提高并行性
    - 12.7 其他并发问题


## 第三部分 程序间的交互和通信

## 第 10 章　系统级 I/O

### 问题
- I/O 是什么？
- 系统级 I/O 和高级别 I/O
- 为什么要学习 Unix I/O？
- 什么是 RIO 包？
- 文件的本质是什么？
- 什么是 I/O 重定向？

### 10.1 Unix I/O

- 什么是 Unix I/O
- Unix I/O 的一些标准操作
  - 打开文件
  - 改变当前的文件位置
  - 读写文件
  - 关闭文件
- Linux shell 创建的每个进程开始时都有 3 个打开的文件：标准输入、标准输出和标准错误

### 10.2 文件


### 10.3 打开和关闭文件


示例代码见腾讯开源的跨平台项目 [Tencent/MMKV](https://github.com/Tencent/MMKV/blob/master/iOS/MMKV/MMKV/MemoryFile.mm#L41)。

### 10.4 读和写文件


### 10.5 用 RIO 包健壮地读写

- RIO 的无缓冲的输入输出函数
- RIO 的带缓冲的输入输出函数

### 10.6 读取文件元数据


### 10.7 读取目录和内容


### 10.8 共享文件



### 10.9 I/O 重定向


### 10.10 标准 I/O 


### 10.11 综合：我该使用哪些 I/O 函数


## 第 11 章　网络编程

### 问题
- 计算机网络是什么？
- 网络应用之间是怎样通信的？（客户端-服务端模型）
- 什么是服务器？
- 什么是 TCP/IP ？


### 11.1 客户端-服务器编程模型



### 11.2 网络


### 11.3 全球 IP 因特网

- IP 地址
- 域名
- 因特网连接

### 11.4 套接字接口

- 套接字地址结构
- socket 函数
- connect 函数
- bind 函数
- listen 函数
- accept 函数
- 主机和服务的转换
- 套接字接口的辅助函数
- echo 客户端和服务器的示例

### 11.5 Web 服务器


- Web  基础
- Web 内容
- HTTP 事务
- 服务动态内容


### 11.6 综合：TINY Web 服务器



## 第 12 章 并发编程

## 前言
- 什么是并发？
- 并发和并行的区别是什么？
- 内核并发和应用级并发
- 构造并发程序的基本方法有哪几种？


### 12.1 基于进程的并发编程

> 延伸阅读：第 8 章 异常控制流

- 如何用进程构造并发程序？
- 示例程序：如何实现一个基于进程的并发服务器？
- 进程有什么优缺点？


### 12.2 基于 I/O 多路复用的并发编程

- I/O 多路复用的出现主要是为了解决什么问题？
- 什么是 I/O 多路复用？
- 示例程序：基于 I/O 多路复用的并发事件驱动服务器
- I/O 多路复用技术有什么优缺点？
- 什么是协程？


### 延伸阅读
- [I/O多路复用技术（multiplexing）是什么？ - 用心阁的回答 - 知乎](https://www.zhihu.com/question/28594409/answer/74003996)
- [I/O多路复用技术（multiplexing）是什么？ - 柴小喵的回答 - 知乎](https://www.zhihu.com/question/28594409/answer/52835876)

### 12.3 基于线程的并发编程

- 线程的特点是什么？相比其他两种并发机制有什么异同点？
- 什么是线程？
- 线程执行模型是什么？
- Posix 线程（Pthreads）是什么？
- Posix 线程（Pthreads）常用操作有哪些？
  - 创建线程
  - 终止线程
  - 回收已终止线程的资源
  - 分离线程
  - 初始化线程
- 示例程序：如何实现一个基于线程的并发服务器？

### 12.4 多线程程序中的共享变量


- 线程的基础内存模型是什么？
- 根据这个模型，变量实例是如何映射到内存的？
  - 全局变量
  - 本地自动变量
  - 本地静态变量
- 什么样的变量才算是共享变量？

### 12.5 用信号量同步线程

- 什么是同步错误（synchronization error）？
- 如何用进度图将并发编程执行过程模型化？
- 解决同步错误的方法之一：信号量
  - 为什么需要信号量？
  - 什么是信号量？
  - 处理信号量的两种操作分别是什么？
    - P
    - V
- 信号量的两种应用
  - 使用信号量来实现互斥
  - 利用信号量来调度共享资源
    - 生产者-消费者问题
    - 读者-写者问题
- 示例程序：基于预线程化的并发服务器


### 12.6 使用线程提高并行性


- 并行和并发
- 单核和多核
- 并行执行任务时，线程越多速度越快？为什么？

### 12.7 其他并发问题

- 线程安全（thread safety）
  - 线程安全性是指什么？
  - 什么样的函数才算是线程安全的？
  - 四种线程不安全函数
    - 不保护共享变量的函数
    - 保持跨越多个调用的状态的函数
    - 返回指向静态变量的指针的函数
    - 调用线程不安全函数的函数
- 可重入性（reentrant function）
  - 可重入性函数是什么？
  - 可重入性函数 VS. 线程安全函数 VS. 线程不安全函数
- 在线程化的程序中使用已存在的库函数
- 竞争（race）
  - 什么是竞争？
  - 如何解决竞争问题？
- 死锁（deadlock）
  - 什么是死锁？
  - 死锁是怎么造成的？
  - 如何避免死锁的出现？
